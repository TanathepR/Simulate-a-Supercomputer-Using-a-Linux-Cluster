# โมดูล 4 การสร้างซูเปอร์คอมพิวเตอร์จำลองจากลินุกซ์คลัสเตอร์

โมดูลนี้จะแบ่งหัวข้อออกเป็น 9 หัวข้อ เพื่อทำความเข้าใจในการสร้างซูเปอร์คอมพิวเตอร์จำลองจากลีนุกซ์คลัสเตอร์ ดังนี้

---
## 1.ตั้งวงเครื่องลินุกซ์เป็นคลัสเตอร์ดีอย่างไร
การตั้งวงเครื่องลินุกซ์เป็นคลัสเตอร์หมายถึงการนำคอมพิวเตอร์หลายเครื่องมาทำงานร่วมกันเสมือนเป็นระบบเดียวกัน เพื่อเพิ่มพลังการประมวลผลและรองรับการทำงานที่ซับซ้อน เช่น การจำลองข้อมูลทางวิทยาศาสตร์หรือการวิเคราะห์ข้อมูลขนาดใหญ่ แม้ว่าแต่ละเครื่องจะทำงานได้ด้วยตัวเอง แต่เมื่อรวมกันเป็นคลัสเตอร์จะช่วยให้การทำงานเร็วขึ้นและมีประสิทธิภาพมากขึ้น โดยมีข้อดีดังนี้:
  - **เพิ่มความเร็วในการประมวลผล:** งานที่ใช้เวลานานบนคอมพิวเตอร์เครื่องเดียวสามารถแบ่งไปประมวลผลพร้อมกันหลายเครื่อง
  - **ประหยัดต้นทุน:** ใช้คอมพิวเตอร์ทั่วไปมาต่อรวมกันแทนที่จะซื้อซูเปอร์คอมพิวเตอร์ราคาแพง
  - **ปรับขยายได้ง่าย:** หากต้องการพลังการประมวลผลเพิ่มขึ้น สามารถเพิ่มเครื่องเข้าไปในคลัสเตอร์ได้โดยไม่ยุ่งยาก
  - **ความยืดหยุ่น:** รองรับการทำงานหลายประเภท ตั้งแต่การประมวลผลข้อมูล การวิจัย ไปจนถึงการพัฒนาซอฟต์แวร์
---
## 2.	สร้างคลัสเตอร์ต้องใช้อะไรบ้าง
การสร้างคลัสเตอร์ต้องมีการเตรียมทั้งฮาร์ดแวร์และซอฟต์แวร์ดังนี้:
  - **ฮาร์ดแวร์:**
    - คอมพิวเตอร์ที่ใช้ระบบปฏิบัติการลินุกซ์ (1 เครื่อง = 1 โหนด)
    - สวิตช์เครือข่ายเพื่อเชื่อมต่อโหนดทั้งหมด
    - สาย LAN สำหรับการเชื่อมต่อ
    - ระบบจัดเก็บข้อมูลร่วม เช่น NFS หรือ Lustre
  - **ซอฟต์แวร์:**
    - ระบบปฏิบัติการลินุกซ์ เช่น Ubuntu, CentOS หรือ Rocky Linux
    - ซอฟต์แวร์จัดการคลัสเตอร์ เช่น SLURM, PBS หรือ OpenMPI
    - โปรแกรมเสริม เช่น Python, GCC, หรือ Intel Compiler
---
## 3.	ลีนุกซ์หนึ่งเครื่องคือหนึ่ง “โหนด”
ในคลัสเตอร์ คอมพิวเตอร์แต่ละเครื่องจะเรียกว่า "โหนด" ซึ่งแบ่งเป็น 2 ประเภทหลัก:
  - **โหนดหลัก (Master Node):** ทำหน้าที่แจกงานและจัดการระบบ
  - **โหนดคำนวณ (Compute Node):** รับงานจากโหนดหลักและประมวลผล
  การทำงานของคลัสเตอร์เกิดจากการประสานงานของโหนดทั้งสองประเภทผ่านเครือข่าย
---
## 4.	สร้างโหนดหลักไว้แจกงาน
โหนดหลักเป็นศูนย์กลางของคลัสเตอร์ มีหน้าที่แจกจ่ายงานและจัดการโหนดอื่นๆ โดยต้องทำสิ่งต่อไปนี้:
  - ติดตั้งระบบปฏิบัติการลินุกซ์
  - ตั้งค่าเครือข่ายและการเชื่อมต่อ SSH เพื่อควบคุมโหนดคำนวณ
  - ติดตั้งซอฟต์แวร์จัดการคลัสเตอร์ เช่น SLURM เพื่อแจกจ่ายงานไปยังโหนดคำนวณ
---
## 5.	ตั้งวงโหนดฉลาดไว้คำนวณ
โหนดคำนวณคือโหนดที่ทำหน้าที่ประมวลผลงาน โดยต้อง:
  - ติดตั้งระบบปฏิบัติการลินุกซ์เหมือนโหนดหลัก
  - ติดตั้งโปรแกรมและไลบรารีที่จำเป็น เช่น OpenMPI หรือ Python
  - เชื่อมต่อกับโหนดหลักผ่าน SSH
---
## 6.	เชื่อมต่อให้ทุกส่วนสื่อสารกันพร้อมจ่ายงาน
การเชื่อมต่อโหนดทั้งหมดเข้าด้วยกันเป็นสิ่งสำคัญเพื่อให้คลัสเตอร์ทำงานได้อย่างราบรื่น:
  - ตั้งค่าเครือข่ายให้โหนดทั้งหมดสามารถสื่อสารกันได้
  - ใช้ระบบไฟล์ร่วม (Shared File System) เช่น NFS เพื่อให้โหนดทุกตัวเข้าถึงข้อมูลได้ง่าย
---
## 7.	ติดตั้งโปรแกรม
การติดตั้งโปรแกรมพื้นฐานเป็นขั้นตอนสำคัญเพื่อให้คลัสเตอร์ทำงานได้:
  - ติดตั้งโปรแกรม เช่น GCC สำหรับคอมไพเลอร์ หรือ Python สำหรับการเขียนโค้ด
  - ติดตั้ง OpenMPI หรือ Intel MPI สำหรับการประมวลผลแบบกระจาย
---

## 8.	ติดตั้งโมดูล
โมดูลช่วยจัดการซอฟต์แวร์ในคลัสเตอร์ได้ง่ายขึ้น โดย:
  - ติดตั้งระบบจัดการโมดูล เช่น Environment Modules หรือ Lmod
  - ตั้งค่าโมดูลให้เหมาะสมกับซอฟต์แวร์ที่ใช้งาน
  - ใช้คำสั่ง `module load` เพื่อโหลดซอฟต์แวร์ที่ต้องการ
---
## 9.	ฝึกภาคปฏิบัติ สร้างงาน จ่ายงาน ติดตามงาน ได้ผลลัพธ์
ฝึกปฏิบัติโดยสร้างงานและทดลองแจกจ่ายงานในคลัสเตอร์:
  - เขียน MPI Job Script สำหรับการประมวลผลแบบกระจาย
  - ใช้ SLURM หรือ PBS เพื่อรันงาน
  - ตรวจสอบสถานะงานด้วยคำสั่ง เช่น `squeue` หรือ `qstat`
---
